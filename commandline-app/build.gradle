// Build base: Mihu build 1.0.8
// @author mihu86

apply plugin: 'application'

mainClassName = "com.wide.example.Main" // necessary for the application plugin

// run the application: gradle run

configurations {
    distribution
}

dependencies {
    compile project(':middleware')
}

// it's a good practice to set the Main-Class and Class-Path properties in the manifest (the app would work without this, but only with the start script generated by gradle)
jar.doFirst { // doFirst is a MUST HAVE! Without this iteration on runtime dependencies won't be correct!
    manifest {
        attributes 'Main-Class': mainClassName
        def manifestClasspath = project.configurations.runtime.collect { it.getName() }.join(' ')
        attributes 'Class-Path': manifestClasspath
    }
}

// main release task depends on the distZip task of this project
rootProject.buildDist.dependsOn distZip

// distribution artifact
artifacts {
    distribution distZip
}
